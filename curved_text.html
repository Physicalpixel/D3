<html>
<meta charset="utf-8">
<title>No. Of Victims</title>
<script src="https://d3js.org/d3.v3.min.js"></script>
<div id="svgContent"></div>

<script>
    var data = [{
        label: "BC",
        value: 50
    }, {
        label: "Alberta",
        value: 20
    }, {
        label: "Manitoba",
        value: 100
    }, {
        label: "Saskatchewan",
        value: 80
    }, {
        label: "ONTARIO",
        value: 20
    }];

    var margin = {
        top: 40,
        left: 40,
        right: 40,
        bottom: 40
    };
    width = 300;
    height = 300;
    radius = Math.min(width - 100, height - 100) / 2;

    var color = d3.scale.category10().range(["#e8af92", "#a9e892"]);

    var a = width / 2 - 20;
    var b = height / 2 - 90;

    var svg = d3.select("#svgContent").append("svg")
        .attr("viewBox", "0 0 " + width + " " + height / 2)
        .attr("preserveAspectRatio", "xMidYMid meet")
        .append("g")
        .attr("transform", "translate(" + a + "," + b + ")");

    var pie = d3.layout.pie()
        .sort(null)
        .value(function(d) {
            return d.value;
        })
        .padAngle(.4);

    var arc = d3.svg.arc()
        .innerRadius(radius - 50)
        .outerRadius(radius - 230)
        .cornerRadius(20);

    var g = svg.selectAll("path")
        .data(pie(data))
        .enter()
        .append("path")
        .attr("id", function(d, i) {
            return "s" + i;
        })
        .attr("d", function(d, i) {
            const ops = arc(d, i);
            // start at the origin
            return 'M0,0' + ops.replace('M', 'L');
        })
        .style("fill", function(d) {
            return color(d.data.value);
        });

    var thing = svg.append("g")
        .attr("id", "thing")
        .style("fill", "navy")
        .attr("class", "label")
        .selectAll('text')
        .data(data)
        .enter()
        .append("text")
        .style("font-size", "6px")
        .append("textPath")
        .attr("xlink:href", function(d, i) {
            return "#s" + i;
        })
        .style("text-anchor", "middle")
        .attr("startOffset", "50%")
        .text(function(d) {
            return d.label.toUpperCase();
        });
</script>

</html>